---
import { Image } from "astro:assets";

interface Props {
  title: string;
  brand: string;
  quantity: string;
  price: number;
  salePrice: number;
  image: any; // Astro image import
  shopUrl?: string;
  description?: string;
}

const { title, brand, quantity, price, salePrice, image, shopUrl, description } = Astro.props;
---

{shopUrl ? (
  <a
    href={shopUrl}
    target="_blank"
    rel="noopener noreferrer"
    class="block transition-transform duration-300 hover:scale-[1.02]"
  >
    <div
      class="bg-[var(--color-card-bg)] rounded-3xl w-full sm:max-w-sm lg:max-w-md flex flex-col transition-shadow duration-300 cursor-pointer"
      style="box-shadow: 0 6px 24px -4px rgba(0,0,0,0.18), 0 -4px 16px -4px rgba(0,0,0,0.10);"
    >
      <!-- Product Image -->
      <div class="bg-white pt-6 rounded-t-3xl">
        <Image 
          src={image} 
          alt={title} 
          class="h-[140px] w-auto mx-auto object-contain"
          width={240}
          height={140}
        />
      </div>

      <!-- Product Info (flex-grow container) -->
      <div class="flex flex-col p-6 flex-1">
        <!-- Title -->
        <h3 class="text-xl font-semibold text-gray-900 mb-3">
          {title}
        </h3>

        <!-- Description -->
        {description && (
          <p class="text-sm text-gray-700 mb-4 leading-relaxed">
            {description}
          </p>
        )}

        <!-- Brand and Quantity -->
        <div class="flex justify-between items-center mb-4 text-sm text-gray-700">
          <span class="font-medium">{brand}</span>
          <span class="text-gray-600">{quantity}</span>
        </div>

        <!-- Price -->
        <div class="flex items-center gap-2 mb-6">
          {price !== salePrice && (
            <span class="text-sm text-gray-500 line-through">
              ${price.toFixed(2)}
            </span>
          )}
          <span class="text-xl font-bold text-[var(--color-primary)]">
            ${salePrice.toFixed(2)}
          </span>
        </div>

        <!-- Button pushed to bottom -->
        <div class="mt-auto">
          <div
            class="w-full bg-[var(--color-primary)] text-white py-3 px-6 rounded-full hover:bg-[var(--color-primary-dark)] transition-colors duration-300 text-center font-medium"
          >
            View in Shop
          </div>
        </div>
      </div>
    </div>
  </a>
) : (
  <div
    class="bg-[var(--color-card-bg)] rounded-3xl w-full sm:max-w-sm lg:max-w-md flex flex-col transition-shadow duration-300"
    style="box-shadow: 0 6px 24px -4px rgba(0,0,0,0.18), 0 -4px 16px -4px rgba(0,0,0,0.10);"
  >
    <!-- Product Image -->
    <div class="bg-white pt-6 rounded-t-3xl">
      <Image 
        src={image} 
        alt={title} 
        class="h-[140px] w-auto mx-auto object-contain"
        width={240}
        height={140}
      />
    </div>

    <!-- Product Info (flex-grow container) -->
    <div class="flex flex-col p-6 flex-1">
      <!-- Title -->
      <h3 class="text-xl font-semibold text-gray-900 mb-3">
        {title}
      </h3>

      <!-- Description -->
      {description && (
        <p class="text-sm text-gray-700 mb-4 leading-relaxed">
          {description}
        </p>
      )}

      <!-- Brand and Quantity -->
      <div class="flex justify-between items-center mb-4 text-sm text-gray-700">
        <span class="font-medium">{brand}</span>
        <span class="text-gray-600">{quantity}</span>
      </div>

      <!-- Price -->
      <div class="flex items-center gap-2 mb-6">
        {price !== salePrice && (
          <span class="text-sm text-gray-500 line-through">
            ${price.toFixed(2)}
          </span>
        )}
        <span class="text-xl font-bold text-[var(--color-primary)]">
          ${salePrice.toFixed(2)}
        </span>
      </div>

      <!-- Button pushed to bottom -->
      <div class="mt-auto">
        <button
          class="w-full bg-[var(--color-primary)] text-white py-3 px-6 rounded-full hover:bg-[var(--color-primary-dark)] transition-colors duration-300 font-medium"
        >
          Buy in Our Shop
        </button>
      </div>
    </div>
  </div>
)}
